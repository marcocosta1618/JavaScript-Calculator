{"version":3,"sources":["calculatorMachine.js","buttons.js","ButtonElement.js","Calculator.js","reportWebVitals.js","index.js"],"names":["math","create","all","calculatorMachine","createMachine","id","initial","context","display","operand1","operand2","operation","on","PERCENT","actions","states","start","zero","NUMBER","target","OPERATOR","entry","result","CLEAR","getOperand1","getOperator","EQUALS","getOperand2","update_display","assign","event","test","payload","replace","handleDotsAndZeros","clear_display","store_operand1","store_operator","store_operand2","clear_operator","percentage","evaluate","display_result","reset","buttons","type","key","char","ButtonElement","className","keyboard","onClick","useEffect","window","addEventListener","handleKeydown","removeEventListener","buttonEl","useRef","e","current","click","useState","isClicked","setIsClicked","setTimeout","ref","Calculator","useMachine","state","send","displayFontSize","setDisplayFontSize","style","fontSize","displayRef","rem","width","scrollWidth","map","button","toUpperCase","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.823c36e8.chunk.js","sourcesContent":["import { createMachine, assign } from \"xstate\";\nimport { create, all } from \"mathjs\";\nconst math = create(all);\n\nconst calculatorMachine = createMachine(\n  {\n    id: \"calculator\",\n    initial: \"start\",\n    context: {\n      display: \"0\",\n      operand1: \"0\",\n      operand2: \"0\",\n      operation: \"\"\n    },\n    on: {\n      PERCENT: {\n        actions: [\"percentage\", \"store_operand1\"]\n      }\n    },\n    states: {\n      start: {\n        initial: \"zero\",\n        states: {\n          zero: {\n            id: \"zero\",\n            on: {\n              NUMBER: {\n                target: \"#getOperand1\",\n                actions: [\"update_display\"]\n              },\n              OPERATOR: {\n                target: \"#getOperator\",\n                actions: [\"store_operand1\", \"store_operator\"]\n              }\n            },\n            entry: [\"reset\"]\n          },\n          result: {\n            id: \"result\",\n            on: {\n              NUMBER: {\n                target: \"#getOperand1\",\n                actions: [\"clear_display\", \"update_display\"]\n              },\n              OPERATOR: {\n                target: \"#getOperator\",\n                actions: [\"store_operand1\", \"store_operator\"]\n              },\n              CLEAR: \"#zero\"\n            }\n          }\n        }\n      },\n      getOperand1: {\n        id: \"getOperand1\",\n        on: {\n          NUMBER: {\n            target: \".#getOperand1\",\n            actions: [\"update_display\"]\n          },\n          OPERATOR: {\n            target: \"getOperator\",\n            actions: [\"store_operand1\", \"store_operator\"]\n          },\n          CLEAR: \"#zero\"\n        }\n      },\n      getOperator: {\n        id: \"getOperator\",\n        on: {\n          OPERATOR: {\n            target: \".#getOperator\",\n            actions: [\"store_operator\"]\n          },\n          NUMBER: {\n            target: \"getOperand2\",\n            actions: [\"clear_display\", \"update_display\"]\n          },\n          EQUALS: \"#result\",\n          CLEAR: \"#zero\"\n        }\n      },\n      getOperand2: {\n        id: \"getOperand2\",\n        on: {\n          NUMBER: {\n            target: \".#getOperand2\",\n            actions: [\"update_display\"]\n          },\n          OPERATOR: {\n            target: \"getOperator\",\n            actions: [\n              \"store_operand2\",\n              \"display_result\",\n              \"store_operand1\",\n              \"clear_operator\",\n              \"store_operator\"\n            ]\n          },\n          EQUALS: {\n            target: \"#result\",\n            actions: [\"store_operand2\", \"display_result\"]\n          },\n          CLEAR: \"#zero\"\n        }\n      }\n    }\n  },\n  {\n    actions: {\n      update_display: assign({\n        display: (context, event) => handleDotsAndZeros(context, event)\n      }),\n      clear_display: assign({\n        display: \"\"\n      }),\n      store_operand1: assign({\n        operand1: (context) => context.display\n      }),\n      store_operator: assign({\n        operation: (context, event) =>\n          // if after any operator \"-\" is pressed, apply it to operand2 (5 * - 5 = 5 * (-5)).\n          event.payload === \"-\"\n            ? context.operation + event.payload\n            : event.payload\n      }),\n      store_operand2: assign({\n        operand2: (context) => context.display\n      }),\n      clear_operator: assign({\n        operation: \"\"\n      }),\n      percentage: assign({\n        display: (context) =>\n          math.evaluate(\n            context.display / 100\n          )\n      }),\n      display_result: assign({\n        display: (context) =>\n          math.evaluate(\n            `${context.operand1} ${context.operation} ${context.operand2}`\n          )\n      }),\n      reset: assign({\n        display: \"0\",\n        operand1: \"0\",\n        operand2: \"0\",\n        operation: \"\"\n      })\n    }\n  }\n);\n\nexport default calculatorMachine;\n\n// helper function (used on update_display action):\n// 1. prevent multiple dots;\n// 2. allows more than 1 leading zero only if first zero is followed by a dot (\".\"):\nfunction handleDotsAndZeros(context, event) {\n  return /^\\./.test(context.display + event.payload)\n    ? (context.display + event.payload).replace(/\\./, \"0.\")  // add leading zero if user digit '.';\n    : /\\./.test(context.display + event.payload)             // if number is float;\n      ? (context.display + event.payload)\n        .replace(/(?<=(\\d+(\\.)+\\d*))\\./g, \"\")  // keep first dot only AND\n        .replace(/^0+/, \"0\")                   // allow only one leading zero \n      : (context.display + event.payload).replace(/^0+/, \"\") || 0   // allow only one leading zero \n}","const buttons = [\n  {\n    id: \"nine\",\n    type: \"number\",\n    key: \"9\",\n    char: \"9\"\n  },\n  {\n    id: \"eight\",\n    type: \"number\",\n    key: \"8\",\n    char: \"8\"\n  },\n  {\n    id: \"seven\",\n    type: \"number\",\n    key: \"7\",\n    char: \"7\"\n  },\n  {\n    id: \"six\",\n    type: \"number\",\n    key: \"6\",\n    char: \"6\"\n  },\n  {\n    id: \"five\",\n    type: \"number\",\n    key: \"5\",\n    char: \"5\"\n  },\n  {\n    id: \"four\",\n    type: \"number\",\n    key: \"4\",\n    char: \"4\"\n  },\n  {\n    id: \"three\",\n    type: \"number\",\n    key: \"3\",\n    char: \"3\"\n  },\n  {\n    id: \"two\",\n    type: \"number\",\n    key: \"2\",\n    char: \"2\"\n  },\n  {\n    id: \"one\",\n    type: \"number\",\n    key: \"1\",\n    char: \"1\"\n  },\n  {\n    id: \"zero\",\n    type: \"number\",\n    key: \"0\",\n    char: \"0\"\n  },\n  {\n    id: \"decimal\",\n    type: \"number\",\n    key: \".\",\n    char: \".\"\n  },\n  {\n    id: \"add\",\n    type: \"operator\",\n    key: \"+\",\n    char: \"+\"\n  },\n  {\n    id: \"subtract\",\n    type: \"operator\",\n    key: \"-\",\n    char: \"-\"\n  },\n  {\n    id: \"multiply\",\n    type: \"operator\",\n    key: \"*\",\n    char: \"x\",\n    payload: \"*\"\n  },\n  {\n    id: \"divide\",\n    type: \"operator\",\n    key: \"/\",\n    char: \"รท\",\n    payload: \"/\"\n  },\n  {\n    id: \"percentage\",\n    type: \"operator\",\n    key: \"%\",\n    char: \"%\"\n  },\n  {\n    id: \"equals\",\n    type: \"operator\",\n    key: \"Enter\",\n    char: \"=\"\n  },\n  {\n    id: \"clear\",\n    type: \"operator\",\n    key: \"c\",\n    char: \"C\"\n  }\n];\n\nexport default buttons;","import { useState, useEffect, useRef } from 'react';\n\nexport default function ButtonElement({ id, className, char, keyboard, onClick }) {\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeydown);\n    return () => window.removeEventListener('keydown', handleKeydown);\n  })\n\n  let buttonEl = useRef(null);\n\n  function handleKeydown(e) {\n    if (e.key === keyboard) {\n      buttonEl.current.click();\n    }\n  }\n\n  const [isClicked, setIsClicked ] = useState(false);   // state variable add/remove css animation class\n\n  function trigAnim() {\n    const reset = () => {\n      setIsClicked(false);\n    }\n    setIsClicked(true);\n    setTimeout(reset, 150);\n  }\n\n  return (\n    <button\n      id={id}\n      key={id}\n      className={`${className} ${isClicked ? 'clicked' : ''}`}\n      char={char}\n      onClick={() => {\n        onClick();\n        trigAnim();\n      }}\n      ref={buttonEl}\n    >\n      {char}\n    </button>\n  )\n}","import calculatorMachine from \"./calculatorMachine.js\";\nimport { useMachine } from \"@xstate/react\";\nimport { useRef, useState, useEffect } from \"react\";\nimport buttons from \"./buttons.js\";\nimport ButtonElement from \"./ButtonElement.js\";\nimport './style/Calculator.css';\n\nexport default function Calculator() {\n  // finite state machine (calculatorMachine) handles app state:\n  const [state, send] = useMachine(calculatorMachine);\n\n  // send events to state machine on click (update state):\n  function onClick(button) {\n    switch (button.char) {\n      case \"C\":\n        send([{ type: \"CLEAR\" }]);\n        break;\n      case \"=\":\n        send([{ type: \"EQUALS\" }]);\n        break;\n      case \"%\":\n        send([{ type: \"PERCENT\" }]);\n        break;\n      default:\n        send([{ type: button.type.toUpperCase(), payload: button.payload ? button.payload : button.char }]);\n    }\n  }\n  ////////////////////////////////////////////////////////\n\n  // measure displayed number width and adjust font-size:\n  const [displayFontSize, setDisplayFontSize] = useState('2rem');\n  const style = { fontSize: displayFontSize };\n  const displayRef = useRef(null);\n  const rem = useRef(2);\n  useEffect(() => {\n    let width = displayRef.current.scrollWidth;\n    if (width > 224) {\n      while (width > 224) {\n        rem.current -= 0.035;\n        width -= 5;\n        if (rem.current < 0.8) { rem.current = 0.8 }\n      }\n    }\n    else if (width < 224) {\n      while (width < 224) {\n        rem.current += 0.035;\n        width += 5;\n        if (rem.current > 2) { rem.current = 2 }\n      }\n    }\n    setDisplayFontSize(`${rem.current}rem`);\n  }, [state.context.display])\n  ////////////////////////////////////////////////////////////////////////\n\n  return (\n    <>\n      <h2>JavaScript Calculator</h2>\n      <div className=\"Calculator\">\n        <div id=\"display\" ><span ref={displayRef} style={style}>{state.context.display}</span></div>\n        <div className=\"keyboard-grid\">\n          {buttons.map((button) => {\n            return (\n              <ButtonElement\n                id={button.id}\n                key={button.id}\n                char={button.char}         // displayed character\n                keyboard={button.key}      // keyboard shortcut\n                className={button.type}    // number or operator\n                onClick={(e) => onClick(button)}\n              >\n              </ButtonElement>\n            )\n          })}\n        </div>\n      </div>\n    </>\n  );\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style/index.css';\nimport Calculator from './Calculator.js';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Calculator />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}